<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muestra de Álbum de Boda</title>

    <style>
        /* --- ESTILOS CSS --- */

        /* CSS de la librería StPageFlip.js (integrado) */
        .stf__parent{position:relative}.stf__wrapper{position:relative;z-index:1}.stf__block{position:absolute;z-index:1;perspective:2000px;transform-style:preserve-3d}.stf__block:first-child{z-index:2}.stf__item{display:block;position:absolute;transform-style:preserve-3d;backface-visibility:hidden;-webkit-backface-visibility:hidden;width:100%;height:100%}.stf__item--hard{background-color:#fff}.stf__item--hard::after,.stf__item--hard::before{content:"";position:absolute;background-color:#fff}.stf__item--hard::before{width:100%;height:100%;top:0;left:0}.stf__item--hard::after{width:20px;height:100%;top:0;background-image:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,.1) 35%,rgba(0,0,0,.3) 50%,rgba(0,0,0,.2) 65%,rgba(0,0,0,0) 100%)}.stf__item--hard-left::after{right:0;transform:translateZ(-1px)}.stf__item--hard-right::after{left:0;transform:scaleX(-1) translateZ(-1px)}.stf__item--soft{background-color:#fff;overflow:hidden}.stf__inner{width:100%;height:100%;position:relative;background-color:#fff}.stf__inner::before{content:"";width:100%;height:100%;position:absolute;top:0;left:0;background-image:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,.15) 100%);z-index:2}.stf__outer{width:100%;height:100%;position:absolute;top:0;left:0;background-image:linear-gradient(to left,rgba(0,0,0,0) 0,rgba(0,0,0,.15) 100%);z-index:2}.stf__hard-inner,.stf__hard-outer{width:100%;height:100%;position:relative;transform-style:preserve-3d;background-size:cover;background-position:center;background-repeat:no-repeat}.stf__hard-inner{background-color:#fff}.stf__hard-outer{background-color:#e1e1e1;backface-visibility:hidden;-webkit-backface-visibility:hidden}.stf__shadow{position:absolute;background-image:linear-gradient(to right,rgba(0,0,0,0) 0,rgba(0,0,0,.5) 100%);z-index:0;opacity:0}.stf__shadow--left{top:0;left:0;width:50%;height:100%}.stf__shadow--right{top:0;right:0;width:50%;height:100%;transform:rotateY(180deg)}.stf__parent[data-orient="portrait"] .stf__wrapper{padding-bottom:150%}.stf__parent[data-orient="landscape"] .stf__wrapper{padding-bottom:50%}

        /* Nuestros estilos personalizados */
        body {
            margin: 0;
            background-color: #333; /* Fondo oscuro para que el álbum resalte */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            font-family: sans-serif;
        }

        .container {
            perspective: 2500px; /* Efecto de profundidad para el giro 3D */
        }

        .flip-book {
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.4); /* Sombra para darle realismo */
        }

        .page {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fff;
        }
        
        .page-content img {
            max-width: 100%;
            max-height: 100%;
        }

        .page--cover {
            background-color: #222; /* Color de una tapa dura */
            border: 1px solid #555;
        }

        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Asegura que la imagen de portada cubra toda la tapa */
        }
        
        .page-content.pliego-izquierdo,
        .page-content.pliego-derecho {
            width: 100%;
            height: 100%;
            background-size: 200% 100%; /* El truco para dividir la imagen de 70x25 */
            background-repeat: no-repeat;
        }

        .page-content.pliego-izquierdo {
            background-position: left center;
        }

        .page-content.pliego-derecho {
            background-position: right center;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- Este es el contenedor donde se creará el flipbook -->
        <div id="album" class="flip-book">
            <!-- Las páginas se generarán aquí con JavaScript -->
        </div>
    </div>

    <script>
        // --- CÓDIGO DE LA LIBRERÍA StPageFlip.js (integrado) ---
        !function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((t="undefined"!=typeof globalThis?globalThis:t||self).St={})}(this,(function(t){"use strict";const i={};function e(t,e){i[t]=e}function s(t){return i[t]}class o{constructor(){this.handlers=[]}destroy(){this.handlers=[]}on(t){this.handlers.push(t)}off(t){this.handlers=this.handlers.filter(i=>i!==t)}trigger(t,i){for(const e of this.handlers)e(new n(i,t))}}class n{constructor(t,i){this.data=t,this.origin=i}}const r={toString:()=>"move",start:"touchstart",move:"touchmove",end:"touchend"},a={toString:()=>"mouse",start:"mousedown",move:"mousemove",end:"mouseup",leave:"mouseleave"},h={};class l{constructor(t,i){this.moving=null,this.handlers={start:[],move:[],end:[],leave:[]},this.startPoint=null,this.endPoint=null,this.nowPoint=null,this.dist=0,this.direction=0,this.angle=0,this.element=t,this.options=i,this.element.addEventListener(a.start,t=>this.onMouseDown(t)),this.element.addEventListener(a.move,t=>this.onMouseMove(t)),this.element.addEventListener(a.end,t=>this.onMouseUp(t)),this.element.addEventListener(a.leave,t=>this.onMouseLeave(t)),this.element.addEventListener(r.start,t=>this.onTouchStart(t)),this.element.addEventListener(r.move,t=>this.onTouchMove(t)),this.element.addEventListener(r.end,t=>this.onTouchEnd(t))}on(t,i){"start"===t&&this.handlers.start.push(i),"move"===t&&this.handlers.move.push(i),"end"===t&&this.handlers.end.push(i),"leave"===t&&this.handlers.leave.push(i)}off(t){"start"===t&&(this.handlers.start=[]),"move"===t&&(this.handlers.move=[]),"end"===t&&(this.handlers.end=[]),"leave"===t&&(this.handlers.leave=[])}getDirection(){return this.direction>0?1:this.direction<0?-1:0}getDist(){return this.dist}getAngle(){return this.angle}getMoving(){return this.moving}getNowPoint(){return this.nowPoint}getStartPoint(){return this.startPoint}getEndPoint(){return this.endPoint}trigger(t,i){for(const e of i)e(new n(this,t))}update(){this.dist=this.getDistance(this.startPoint,this.nowPoint),this.angle=this.getAngle(this.startPoint,this.nowPoint),this.direction=this.nowPoint.x-this.startPoint.x}onMouseDown(t){this.startPoint=this.getMousePos(this.element,t),this.nowPoint=this.startPoint,this.moving=!0,this.trigger(t,this.handlers.start)}onMouseMove(t){this.moving&&(this.nowPoint=this.getMousePos(this.element,t),this.update(),this.trigger(t,this.handlers.move))}onMouseUp(t){this.moving&&(this.moving=!1,this.endPoint=this.getMousePos(this.element,t),this.trigger(t,this.handlers.end))}onMouseLeave(t){this.moving&&(this.moving=!1,this.endPoint=this.getMousePos(this.element,t),this.trigger(t,this.handlers.leave))}onTouchStart(t){1===t.touches.length&&(this.startPoint=this.getTouchPos(this.element,t),this.nowPoint=this.startPoint,this.moving=!0,this.trigger(t,this.handlers.start))}onTouchMove(t){t.touches.length>0&&(this.nowPoint=this.getTouchPos(this.element,t),this.moving&&this.update(),this.trigger(t,this.handlers.move))}onTouchEnd(t){this.moving=!1,this.trigger(t,this.handlers.end)}getMousePos(t,i){const e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}getTouchPos(t,i){const e=t.getBoundingClientRect();return{x:i.touches[0].clientX-e.left,y:i.touches[0].clientY-e.top}}getDistance(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}getAngle(t,i){const e=i.x-t.x,s=i.y-t.y;return Math.atan2(s,e)/Math.PI*180}}const c={};class d{constructor(t,i){this.isLoad=!1,this.pages=null,this.element=t,this.createdPages=[],this.setting=i,this.element.classList.add("stf__parent"),this.element.style.minWidth=this.setting.width+"px",this.element.style.minHeight=this.setting.height+"px",this.wrapper=document.createElement("div"),this.wrapper.classList.add("stf__wrapper"),this.element.appendChild(this.wrapper),this.element.dataset.orient=this.setting.usePortrait?"portrait":"landscape",this.onResize()}getUI(){return s(this.element)}getSetting(){return this.setting}getDrawer(){return c[this.element]}getDistortion(){return h[this.element]}isLoad(){return this.isLoad}getWrapper(){return this.wrapper}getPages(){return this.createdPages}getPage(t){return this.createdPages[t]}getPagesCount(){return this.createdPages.length}destroy(){this.element.classList.remove("stf__parent"),this.element.innerHTML=""}loadFromImages(t){const i=t.map((t,i)=>`<div class="stf__item" data-density="soft" data-page-id="${i}" style="background-image: url(${t})"></div>`);this.loadFromHTML(i)}loadFromHTML(t){this.isLoad=!1,this.pages=t,this.createdPages=[],this.wrapper.innerHTML="";let i=0;for(const t of this.pages){const e=document.createElement("div");e.classList.add("stf__item"),e.innerHTML=t.innerHTML,e.dataset.pageId=String(i++);for(const s of t.attributes)e.setAttribute(s.name,s.value);const s=document.createElement("div");s.classList.add("stf__block"),s.appendChild(e),this.wrapper.appendChild(s),this.createdPages.push(e)}this.isLoad=!0,this.getDrawer().update()}updateFromImages(t){const i=t.map((t,i)=>`<div class="stf__item" data-density="soft" data-page-id="${i}" style="background-image: url(${t})"></div>`);this.updateFromHTML(i)}updateFromHTML(t){this.isLoad&&this.loadFromHTML(t)}onResize(){this.getDrawer().update()}}const g={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};class u{constructor(t,i){this.app=t,this.helper=i,this.leftPage=null,this.rightPage=null,this.bottomPage=null,this.flippingPage=null,this.direction=null,this.state="read",this.rotation=0,this.distance=0,this.flipCorner=null,this.corner=null,this.pageRect=null}getDirection(){return this.direction}getAngle(){return this.rotation}getRect(){return this.pageRect}getState(){return this.state}getFlippingPage(){return this.flippingPage}getBottomPage(){return this.bottomPage}getLeftPage(){return this.leftPage}getRightPage(){return this.rightPage}start(t){this.reset();const i=this.getBoundsRect();if(!this.helper.pointInRect(i,t)){if(!this.app.getSetting().showPageCorners)return null;if(this.corner=this.findCorner(),this.helper.checkPointAtCorner(this.corner,t,this.app.getSetting().cornerSize))return this.flip(this.corner),this.corner}return!this.app.getSetting().clickToFlip||(this.helper.getPointDirection(i,t)===g.LEFT?(this.corner=g.LEFT,this.flip(this.corner)):(this.corner=g.RIGHT,this.flip(this.corner))),null}fold(t){this.pageRect=this.getBoundsRect();const i=this.helper.pointInRect(this.pageRect,t);this.state==="fold"&&i&&(this.calculate(t),this.render())}flip(t){if("read"===this.state){if(t===g.LEFT){const t=this.app.getRender().getLeftPage();if(!t)return;this.direction=g.LEFT,this.flippingPage=t.getTopPage(),this.bottomPage=t.getBottomPage()}else{if(t!==g.RIGHT)return;const t=this.app.getRender().getRightPage();if(!t)return;this.direction=g.RIGHT,this.flippingPage=t.getTopPage(),this.bottomPage=t.getBottomPage()}this.state="user_fold",this.flipCorner=t,this.app.getRender().startAnimation()}else this.state="read"}fix(t){this.pageRect=this.getBoundsRect(),this.state="flipping",this.calculate(t),this.render()}finish(t){this.state="read",this.reset()}stopMove(){this.state="flipping"}getBoundsRect(){const t=this.app.getUI().getRect();return this.app.getSetting().usePortrait?{left:t.left,top:t.top,width:t.width,height:t.height}:t}reset(){this.leftPage=null,this.rightPage=null,this.bottomPage=null,this.flippingPage=null,this.direction=null,this.state="read",this.rotation=0,this.distance=0,this.flipCorner=null,this.corner=null,this.pageRect=null,this.app.getRender().stopAnimation()}calculate(t){if(this.pageRect=this.getBoundsRect(),this.direction===g.RIGHT)this.calcRight(t);else{if(this.direction!==g.LEFT)return;this.calcLeft(t)}this.app.getRender().update()}render(){this.app.getRender().draw(this.rotation,this.corner,this.pageRect)}calcLeft(t){const i=this.helper.GetRotatedPoint({x:t.x-this.pageRect.left,y:t.y-this.pageRect.top},{x:this.pageRect.width,y:0},-this.app.getRender().getAngle()),e=this.pageRect.height;if(i.x<0){const t=Math.sqrt(Math.pow(this.pageRect.width,2)+Math.pow(i.y,2));this.distance=this.helper.clamp(t,0,2*this.pageRect.width),this.rotation=-Math.asin(i.y/t)/Math.PI*180}else{const t=i.x/this.pageRect.width;t>1&&(i.x=this.pageRect.width),t<.5?(i.x=2*i.x,this.distance=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),this.rotation=-Math.atan2(i.y,i.x)/Math.PI*180):this.distance=this.pageRect.width/t,this.rotation=-Math.atan2(i.y,this.pageRect.width)/Math.PI*180}this.rotation=this.helper.clamp(this.rotation,-90,0),this.corner=i.y<e/2?g.TOP:g.BOTTOM}calcRight(t){const i=this.helper.GetRotatedPoint({x:t.x-this.pageRect.left,y:t.y-this.pageRect.top},{x:0,y:0},-this.app.getRender().getAngle());if(i.x>this.pageRect.width)this.distance=this.helper.clamp(Math.sqrt(Math.pow(i.x-this.pageRect.width,2)+Math.pow(i.y,2)),0,2*this.pageRect.width),this.rotation=Math.asin(i.y/(this.distance+1e-5))/Math.PI*180;else{const t=(this.pageRect.width-i.x)/this.pageRect.width;t>.5?(i.x=this.pageRect.width-2*(this.pageRect.width-i.x),this.distance=Math.sqrt(Math.pow(this.pageRect.width-i.x,2)+Math.pow(i.y,2)),this.rotation=Math.atan2(i.y,this.pageRect.width-i.x)/Math.PI*180):this.distance=this.pageRect.width/(1-t),this.rotation=Math.atan2(i.y,this.pageRect.width)/Math.PI*180}this.rotation=this.helper.clamp(this.rotation,0,90),this.corner=i.y<this.pageRect.height/2?g.TOP:g.BOTTOM}findCorner(){const t=this.app.getUI().getRect(),i=this.app.getMousePos();if(i.x<t.width/2){if(i.y<this.app.getSetting().cornerSize)return g.TOP;if(i.y>t.height-this.app.getSetting().cornerSize)return g.BOTTOM}else{if(i.y<this.app.getSetting().cornerSize)return g.TOP;if(i.y>t.height-this.app.getSetting().cornerSize)return g.BOTTOM}return null}}const f={page:0,showCover:!1,width:0,height:0,usePortrait:!0,startZIndex:1,autoSize:!0,maxShadowOpacity:.2,flippingTime:1e3,mobileScrollSupport:!0,swipeDistance:30,minPageWidth:0,minPageHeight:0,maxPageWidth:0,maxPageHeight:0,showPageCorners:!0,disableFlipByClick:!1,clickToFlip:!0,cornerSize:100},p={};class m{constructor(t,i){this.app=t,this.helper=i,this.pages=this.app.getUI().getPages(),this.isFocus=Array(this.pages.length).fill(!1)}set(t){this.isFocus[t]=!0}setAll(t){for(let i=0;i<this.isFocus.length;i++)this.isFocus[i]=t}get(){return this.isFocus}clear(){this.isFocus=Array(this.pages.length).fill(!1)}}const w={};class v{constructor(t,i,e){this.app=t,this.helper=i,this.render=e}getPage(t){if(t<0)return null;const i=this.app.getUI().getPages();return t>=i.length?null:i[t]}getPageIndex(t){const i=this.app.getUI().getPages().indexOf(t);return-1===i?null:i}getLeftPage(){const t=this.app.getRender().getRightPage();if(null===t)return null;const i=this.getPageIndex(t.getTopPage());return i>1?{top:this.getPage(i-2),bottom:this.getPage(i-1)}:null}getRightPage(){const t=this.app.getRender().getLeftPage();if(null===t)return null;const i=this.getPageIndex(t.getTopPage());return i<this.app.getUI().getPagesCount()-2?{top:this.getPage(i+1),bottom:this.getPage(i+2)}:null}getNextPage(){const t=this.app.getRender().getLeftPage();return null===t?null:this.getPageIndex(t.getTopPage())}getPrevPage(){const t=this.app.getRender().getRightPage();return null===t?null:this.getPageIndex(t.getTopPage())}show(t){if(t<0)return;const i=this.app.getUI().getPages();t>=i.length||this.app.getRender().showPage(t)}}class S{constructor(t){this.htmlElement=t}asPage(){return this.htmlElement}getElement(){return this.htmlElement}getDensity(){return this.htmlElement.dataset.density}setDensity(t){this.htmlElement.dataset.density=t}isActive(){return this.htmlElement.classList.contains("stf__item--active")}isHard(){return"hard"===this.htmlElement.dataset.density}isSoft(){return"soft"===this.htmlElement.dataset.density}setOrientation(t){this.htmlElement.classList.remove("stf__item--left","stf__item--right"),t===g.LEFT?this.htmlElement.classList.add("stf__item--left"):this.htmlElement.classList.add("stf__item--right")}getOrientation(){return this.htmlElement.classList.contains("stf__item--left")?g.LEFT:g.RIGHT}setShadow(t,i){this.isSoft()?this.htmlElement.style.background="linear-gradient(to right, #ffffff "+(100-100*t)+"%, #dddddd 100%)":this.htmlElement.querySelector(".stf__front").style.background="linear-gradient(to right, #ffffff "+(100-100*t)+"%, #dddddd 100%)"}setHardShadow(t,i){i===g.LEFT?this.htmlElement.style.background="linear-gradient(to left, rgba(0, 0, 0, "+t*this.app.getSetting().maxShadowOpacity+") 0%, rgba(0, 0, 0, 0) 100%)":this.htmlElement.style.background="linear-gradient(to right, rgba(0, 0, 0, "+t*this.app.getSetting().maxShadowOpacity+") 0%, rgba(0, 0, 0, 0) 100%)"}setSide(t,i,e,s){switch(t){case g.LEFT:this.setLeft(s);break;case g.RIGHT:this.setRight(s);break;case g.TOP:this.setTop(i,s);break;case g.BOTTOM:this.setBottom(e,s)}}setRight(t){this.isHard()?(this.htmlElement.style.transform="translate3d(0, 0, 0)",this.htmlElement.style.transformOrigin="0 100% 0",this.htmlElement.style.transform="rotateY("+t+"deg)"):this.htmlElement.style.transform="rotateY("+-t+"deg)"}setLeft(t){this.isHard()?(this.htmlElement.style.transform="translate3d(0, 0, 0)",this.htmlElement.style.transformOrigin="100% 100% 0",this.htmlElement.style.transform="rotateY("+-t+"deg)"):this.htmlElement.style.transform="rotateY("+t+"deg)"}setTop(t,i){this.isHard()?this.htmlElement.style.transform="translate3d(0, 0, 0) rotateX("+i+")":this.htmlElement.style.transform="translate3d(0, 0, 0) rotateX("+t+")"}setBottom(t,i){this.isHard()?this.htmlElement.style.transform="translate3d(0, 0, 0) rotateX("+-i+")":this.htmlElement.style.transform="translate3d(0, 0, 0) rotateX("+-t+")"}hide(){this.htmlElement.style.display="none"}show(){this.htmlElement.style.display="block"}setAngle(t,i){if(this.isHard()){const e=i<0?-i:i,s=this.getOrientation()===g.RIGHT?(e/90-1)*10:(1-e/90)*10;i<0?this.htmlElement.style.transform="translateX("+s+"px) rotateY("+i+"deg)":this.htmlElement.style.transform="translateX("+-s+"px) rotateY("+i+"deg)")}else this.htmlElement.style.transform="rotateY("+t+"deg)"}setTransform(t,i){const e="translate3d(0, 0, 0)";this.htmlElement.style.transform=e+" rotateY("+t+"deg) rotateX("+i+")"}setSoftGradient(t,i){const e="to "+(this.getOrientation()===g.LEFT?"left":"right"),s=Math.max(0,1.5*(100-t)/100);i.querySelector(".stf__outer").style.background="linear-gradient("+e+",rgba(0, 0, 0, "+s*this.app.getSetting().maxShadowOpacity+") 5%,rgba(0, 0, 0, 0) 100%)"}setHardGradient(t,i,e){const s="to "+(this.getOrientation()===g.LEFT?"right":"left"),o=Math.max(0,1.5*(100-t)/100),n=(this.getOrientation()===g.LEFT?" stf__item--hard-left":" stf__item--hard-right")+(" stf__item--hard-"+(e===g.TOP?"top":"bottom"));i.className="stf__item stf__item--hard"+n,i.style.background="linear-gradient("+s+",rgba(0, 0, 0, "+o*this.app.getSetting().maxShadowOpacity+") 0%,rgba(0, 0, 0, 0) 18%)"}}class P extends S{constructor(t,i,e){super(i),this.app=t,this.pageController=e,this.wrapper=i.parentElement,this.isLoad=!1}getWrapper(){return this.wrapper}load(){this.isLoad||(this.isLoad=!0,this.wrapper.style.display="block")}isActive(){return this.wrapper.style.zIndex===this.app.getSetting().startZIndex+3}isFlipping(){return this.wrapper.style.zIndex===this.app.getSetting().startZIndex+2}getAngle(){const t=this.getOrientation()===g.LEFT?-1:1;return this.isSoft()?this.getSoftAngle()*t:this.getHardAngle()}getSoftAngle(){const t=this.htmlElement.style.transform.match(/rotateY\((.*)deg\)/);return t?Number(t[1]):0}getHardAngle(){const t=this.htmlElement.style.transform.match(/rotateY\((.*)deg\)/);return t?Number(t[1]):0}hide(){this.wrapper.style.display="none"}show(){this.wrapper.style.display="block"}setAngle(t){this.getOrientation()===g.LEFT?super.setAngle(t,t):super.setAngle(t,-t)}setOrientation(t){super.setOrientation(t),this.isHard()&&(this.htmlElement.classList.remove("stf__item--hard-left","stf__item--hard-right"),t===g.LEFT?this.htmlElement.classList.add("stf__item--hard-left"):this.htmlElement.classList.add("stf__item--hard-right"))}setShadow(t,i){if(this.isSoft()){const e=i<0?i:-i;super.setSoftGradient(t,this.htmlElement),this.htmlElement.querySelector(".stf__inner").style.transform="rotateY("+e+"deg)"}else super.setHardGradient(t,this.htmlElement,this.pageController.getCorner())}setTransform(t,i){super.setTransform(t,i),this.isHard()&&(this.getOrientation()===g.LEFT?this.htmlElement.style.transformOrigin="100% 0":this.htmlElement.style.transformOrigin="0 0")}clearShadow(){this.isSoft()?(this.htmlElement.querySelector(".stf__outer").style.background="",this.htmlElement.querySelector(".stf__inner").style.transform=""):this.htmlElement.style.background=""}setZIndex(t){this.wrapper.style.zIndex=String(t)}fold(t,i){this.setZIndex(this.app.getSetting().startZIndex+2),this.setAngle(i?180-t:t)}turn(t){const i=this.getOrientation()===g.RIGHT?-1:1;this.setAngle(t*i)}activate(){this.setZIndex(this.app.getSetting().startZIndex+3)}disactivate(){this.setZIndex(this.app.getSetting().startZIndex+1)}render(t,i){this.setZIndex(this.app.getSetting().startZIndex+2);let e=0;t>90&&(e=t-90),t<0&&(t=0),t>180&&(t=180);const s=(t-90)*.1,o=Math.abs(s);if(this.isSoft())this.getOrientation()===g.RIGHT?i===g.BOTTOM?this.setTransform(-t,o):this.setTransform(-t,-o):i===g.BOTTOM?this.setTransform(t,-o):this.setTransform(t,o);else{const r=this.getOrientation()===g.RIGHT?t/2:-t/2,a=this.getOrientation()===g.RIGHT?-1:1;i===g.BOTTOM?this.setTransform(r*a,-e):this.setTransform(r*a,e)}}simpleTurn(t){const i=this.getOrientation()===g.RIGHT?-1:1,e=t*i;this.setZIndex(this.app.getSetting().startZIndex+5),this.setAngle(e)}setAnimation(t){this.htmlElement.style.transition=t}}class b extends S{constructor(t,i){super(i),this.app=t,this.isLoad=!1,this.shadow=null,this.isLoad||this.create()}isActive(){return!1}isHard(){return!0}getWrapper(){return this.htmlElement.parentElement}setOrientation(t){super.setOrientation(t),this.isHard()&&(this.htmlElement.classList.remove("stf__item--hard-left","stf__item--hard-right"),t===g.LEFT?this.htmlElement.classList.add("stf__item--hard-left"):this.htmlElement.classList.add("stf__item--hard-right"))}setShadow(t){this.shadow&&(this.shadow.style.opacity=String(t*this.app.getSetting().maxShadowOpacity))}load(){this.isLoad||this.create()}create(){this.isLoad=!0,this.htmlElement.classList.add("stf__item--hard");const t=document.createElement("div");t.classList.add("stf__hard-inner"),this.htmlElement.appendChild(t);const i=document.createElement("div");if(i.classList.add("stf__hard-outer"),this.htmlElement.appendChild(i),this.app.getSetting().showCover){const e=this.app.getUI().getPages();this.getOrientation()===g.LEFT?e[e.length-1].classList.add("stf__item--cover"):e[0].classList.add("stf__item--cover")}const e=document.createElement("div");e.classList.add("stf__shadow"),this.getWrapper().appendChild(e),this.shadow=e}setZIndex(t){this.getWrapper().style.zIndex=String(t)}}class C extends S{constructor(t,i,e){super(i),this.app=t,this.topPage=null,this.bottomPage=null,this.direction=e}getTopPage(){return this.topPage}getBottomPage(){return this.bottomPage}getDirection(){return this.direction}hide(){this.topPage.hide(),this.bottomPage.hide()}show(){this.topPage.show(),this.bottomPage.show()}setShadow(t){this.direction===g.LEFT?this.topPage.setHardShadow(t,g.LEFT):this.topPage.setHardShadow(t,g.RIGHT)}setPages(t,i){this.topPage=t,this.bottomPage=i,this.direction===g.LEFT?this.topPage.setOrientation(g.LEFT):this.topPage.setOrientation(g.RIGHT),this.bottomPage.setOrientation(this.direction),this.topPage.setZIndex(this.app.getSetting().startZIndex+1),this.bottomPage.setZIndex(this.app.getSetting().startZIndex)}setAngle(t){this.topPage.setAngle(t)}clearShadow(){this.topPage.clearShadow()}setAnimation(t){this.topPage.setAnimation(t),this.bottomPage.setAnimation(t)}}const L={};class E{constructor(t,i,s,o){this.timer=null,this.started=!1,this.app=t,this.helper=i,this.pageController=s,this.pageRepository=o,this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.shadow=null,this.animating=null,this.angle=0}getLeftPage(){return this.leftPage}getRightPage(){return this.rightPage}getAngle(){return this.angle}start(){this.started||(this.started=!0,this.timer=setInterval(()=>this.update(),50))}stop(){this.started=!1,clearInterval(this.timer)}showPage(t){this.clear(),t=this.helper.clamp(t,0,this.app.getUI().getPagesCount()-1),t%2!=0&&t--;const i=this.app.getUI().getPage(t),e=this.app.getUI().getPage(t+1);this.leftPage.setPages(i,e),this.rightPage.setPages(e,i),this.leftPage.setAngle(0),this.rightPage.setAngle(0),this.leftPage.show(),this.rightPage.show(),this.bottomPage.hide(),this.flippingPage.hide(),this.app.getUI().getPages().forEach(t=>t.classList.remove("stf__item--active")),i.classList.add("stf__item--active"),e.classList.add("stf__item--active"),this.app.getUI().setPageZIndex(i,this.app.getSetting().startZIndex+4),this.app.getUI().setPageZIndex(e,this.app.getSetting().startZIndex+4)}startAnimation(){this.animating=requestAnimationFrame(()=>this.animate())}stopAnimation(){cancelAnimationFrame(this.animating)}animate(){this.animating=requestAnimationFrame(()=>this.animate()),this.update()}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},writable:!0,configurable:!0})}class _{constructor(t,i,e){if(this.events=new o,this.helper=new(function(){this.clamp=(t,i,e)=>{let s=t;return s>e&&(s=e),s<i&&(s=i),s},this.pointInRect=(t,i)=>i.x>=t.left&&i.x<=t.left+t.width&&i.y>=t.top&&i.y<=t.top+t.height,this.GetRotatedPoint=(t,i,e)=>{const s=e*Math.PI/180;return{x:t.x*Math.cos(s)+t.y*Math.sin(s),y:t.y*Math.cos(s)-t.x*Math.sin(s)}},this.getPointDirection=(t,i)=>{if(i.x<t.left)return g.LEFT;if(i.x>t.width)return g.RIGHT;if(i.y<t.top)return g.TOP;if(i.y>t.height)return g.BOTTOM;const e=i.x-t.left,s=t.width-e,o=i.y-t.top,n=t.height-o;return Math.min(e,s,o,n)===e?g.LEFT:Math.min(e,s,o,n)===s?g.RIGHT:Math.min(e,s,o,n)===o?g.TOP:g.BOTTOM},this.checkPointAtCorner=(t,i,e)=>t===g.TOP?i.y<e:t===g.BOTTOM?i.y>this.app.getUI().getRect().height-e:t===g.LEFT?i.x<e:t===g.RIGHT?i.x>this.app.getUI().getRect().width-e:void 0})(),this.setting=Object.assign({},f,i),this.block=t,s(this.block)||e(this.block,this),!this.setting.width||!this.setting.height)throw new Error("Invalid width or height");c[this.block]=new(class extends E{constructor(t,i,s,o){super(t,i,s,o),this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.shadow=null,this. angle=0}drawShadow(t,i,e){const s=t.width;this.shadow.style.display="block",this.shadow.style.transform="translate3d("+(t.left+i)+"px, "+t.top+"px, 0)",this.shadow.style.width=s+"px",this.shadow.style.height=t.height+"px",this.shadow.style.opacity=e*this.app.getSetting().maxShadowOpacity,e>0?this.shadow.style.display="block":this.shadow.style.display="none"}draw(t,i,e){const s=this.pageRepository.getFlipping();if(!s)return;const o=e.width,n=this.helper.clamp(Math.abs(100*Math.sin(t*Math.PI/180)),0,100);if(this.pageController.getDirection()===g.RIGHT){const r=e.left+o-Math.round(this.pageController.getDistance());this.flippingPage.setTransform(r,i),this.flippingPage.render(t,i),this.bottomPage.setTransform(r,i),s.setShadow(n,t),this.drawShadow(e,o/2,1)}else{const r=e.left+Math.round(this.pageController.getDistance());this.flippingPage.setTransform(r,i),this.flippingPage.render(-t,i),this.bottomPage.setTransform(r,i),s.setShadow(n,-t),this.drawShadow(e,0,1)}}update(){if(!this.app.getUI().isLoad())return;this.clear();const t=this.app.getUI().getRect();this.leftPage.setRect(t.left,t.top,t.width/2,t.height),this.rightPage.setRect(t.left+t.width/2,t.top,t.width/2,t.height),this.flippingPage.setRect(t.left,t.top,t.width,t.height),this.bottomPage.setRect(t.left,t.top,t.width,t.height),this.shadow=this.app.getUI().getShadow(),this.shadow.style.transform="translate3d("+t.left+"px, "+t.top+"px, 0)",this.shadow.style.width=2*t.width+"px",this.shadow.style.height=t.height+"px",this.showPage(this.app.getPageFlip().getCurrentPageIndex())}clear(){this.leftPage&&this.leftPage.destroy(),this.rightPage&&this.rightPage.destroy(),this.flippingPage&&this.flippingPage.destroy(),this.bottomPage&&this.bottomPage.destroy(),this.leftPage=new(class{constructor(t,i){this.app=t,this.page=null,this.rect={left:0,top:0,width:0,height:0},this.element=i,this.element.classList.add("stf__block"),this.element.style.position="absolute"}setRect(t,i,e,s){this.rect.left=t,this.rect.top=i,this.rect.width=e,this.rect.height=s,this.element.style.left=t+"px",this.element.style.top=i+"px",this.element.style.width=e+"px",this.element.style.height=s+"px"}setPage(t,i){this.page=t,this.page.setOrientation(i),this.element.innerHTML="",this.element.appendChild(this.page.getElement())}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}destroy(){this.element.remove()}})(this.app,document.createElement("div")),this.rightPage=new(class{constructor(t,i){this.app=t,this.page=null,this.rect={left:0,top:0,width:0,height:0},this.element=i,this.element.classList.add("stf__block"),this.element.style.position="absolute"}setRect(t,i,e,s){this.rect.left=t,this.rect.top=i,this.rect.width=e,this.rect.height=s,this.element.style.left=t+"px",this.element.style.top=i+"px",this.element.style.width=e+"px",this.element.style.height=s+"px"}setPage(t,i){this.page=t,this.page.setOrientation(i),this.element.innerHTML="",this.element.appendChild(this.page.getElement())}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}destroy(){this.element.remove()}})(this.app,document.createElement("div")),this.flippingPage=new(class{constructor(t,i){this.app=t,this.page=null,this.rect={left:0,top:0,width:0,height:0},this.element=i,this.element.classList.add("stf__block"),this.element.style.position="absolute",this.element.style.zIndex="1"}setRect(t,i,e,s){this.rect.left=t,this.rect.top=i,this.rect.width=e,this.rect.height=s,this.element.style.left=t+"px",this.element.style.top=i+"px",this.element.style.width=e+"px",this.element.style.height=s+"px"}setPage(t){this.page=t,this.element.innerHTML="",this.element.appendChild(this.page.getElement())}setTransform(t,i){this.element.style.transform=i===g.TOP?"translate("+-t+"px, 0) rotateX(90deg)":"translate("+-t+"px, 0) rotateX(-90deg)"}render(t,i){const e=this.app.getUI().getRect(),s="translate("+(e.width/2-this.rect.left)+"px, 0)";if(i===g.BOTTOM)this.element.style.transform=s+"rotateX("+(90-90*t/180)+")";else{if(i!==g.TOP)return;this.element.style.transform=s+"rotateX("+(-90+90*t/180)+")"}}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}destroy(){this.element.remove()}})(this.app,document.createElement("div")),this.bottomPage=new(class{constructor(t,i){this.app=t,this.page=null,this.rect={left:0,top:0,width:0,height:0},this.element=i,this.element.classList.add("stf__block"),this.element.style.position="absolute",this.element.style.zIndex="0"}setRect(t,i,e,s){this.rect.left=t,this.rect.top=i,this.rect.width=e,this.rect.height=s,this.element.style.left=t+"px",this.element.style.top=i+"px",this.element.style.width=e+"px",this.element.style.height=s+"px"}setPage(t,i){this.page=t,this.page.setOrientation(i),this.element.innerHTML="",this.element.appendChild(this.page.getElement())}setTransform(t,i){const e=this.app.getUI().getRect(),s="translate("+(e.width/2-this.rect.left)+"px, 0)";i===g.BOTTOM?this.element.style.transform=s+"rotateX(-90deg)":this.element.style.transform=s+"rotateX(90deg)"}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}destroy(){this.element.remove()}})(this.app,document.createElement("div")),this.app.getUI().getWrapper().appendChild(this.leftPage.element),this.app.getUI().getWrapper().appendChild(this.rightPage.element),this.app.getUI().getWrapper().appendChild(this.flippingPage.element),this.app.getUI().getWrapper().appendChild(this.bottomPage.element)
}showPage(t){if(this.clear(),t%2!=0&&t--,this.app.getUI().isLoad()){const i=this.app.getUI().getPages();i.forEach(t=>t.getElement().classList.remove("stf__item--active"));const e=this.app.getUI().getPage(t);e&&e.getElement().classList.add("stf__item--active");const s=this.app.getUI().getPage(t+1);s&&s.getElement().classList.add("stf__item--active");const o=this.pageRepository.getRight();o&&this.pageRepository.getLeft()&&(t>1?this.leftPage.setPage(this.pageRepository.getLeft().getBottomPage(),g.LEFT):this.leftPage.hide(),t<i.length-2?this.rightPage.setPage(this.pageRepository.getRight().getTopPage(),g.RIGHT):this.rightPage.hide()),this.leftPage.show(),this.rightPage.show()}}})(this,this.helper,this.pageController,this.pageRepository)),p[this.block]=new d(this.block,this.setting),h[this.block]=new(class extends E{constructor(t,i,s,o){super(t,i,s,o),this.leftPage=new C(t,null,g.LEFT),this.rightPage=new C(t,null,g.RIGHT)}drawShadow(t,i,e,s){const o=this.pageController.getDirection()===g.RIGHT?i:t.width/2-i;s.setShadow(e,o/ (t.width/2))}draw(t){if("fold"===this.pageController.getState()){const i=this.pageController.getRect(),e=i.width/2,s=1-Math.abs(t)/180;return this.pageController.getDirection()===g.RIGHT?this.flippingPage.render(t,this.pageController.getCorner()):this.flippingPage.render(t,this.pageController.getCorner()),this.flippingPage.setShadow(100*s,t),void this.drawShadow(i,e*s,s,this.pageController.getDirection()===g.RIGHT?this.leftPage:this.rightPage)}this.leftPage.clearShadow(),this.rightPage.clearShadow()}update(){if(!this.app.getUI().isLoad())return;const t=this.pageRepository.getFlipping();t&&(this.flippingPage=t);const i=this.pageRepository.getBottom();i&&(this.bottomPage=i);const e=this.pageRepository.getLeft();e&&(this.leftPage=e);const s=this.pageRepository.getRight();s&& (this.rightPage=s)}clear(){const t=this.app.getUI().getPages();for(const i of t)i.getElement().parentElement.style.zIndex=this.app.getSetting().startZIndex,i.setAnimation(""),i.setAngle(0),i.clearShadow();const i=this.app.getUI().getShadow();i&&(i.style.opacity="0")}})(this,this.helper,this.pageController,this.pageRepository),w[this.block]=new(class{constructor(t,i){this.app=t,this.setting=i,this.pages=null,this.flippingPage=null,this.bottomPage=null,this.leftPage=null,this.rightPage=null}load(){this.pages=this.app.getUI().getPages().map(t=>new P(this.app,t,this.app.getPageFlip()))}getFlipping(){return this.flippingPage}getBottom(){return this.bottomPage}getLeft(){return this.leftPage}getRight(){return this.rightPage}getPages(){return this.pages}update(){const t=this.app.getUI().getPages();if(0===t.length)return;const i=this.app.getUI().getPages().map(t=>new P(this.app,t,this.app.getPageFlip()));if(this.app.getSetting().showCover&&t.length>0){const e=new b(this.app,t[0]),s=new b(this.app,t[t.length-1]);i[0]=e,i[t.length-1]=s}this.pages=i;const e=this.app.getPageFlip().getCurrentPageIndex(),s=new C(this.app,null,g.RIGHT),o=new C(this.app,null,g.LEFT);e>0&&o.setPages(this.pages[e-1],this.pages[e-2]),e<this.pages.length-1&&s.setPages(this.pages[e],this.pages[e+1]),this.rightPage=s,this.leftPage=o}flip(t){const i=t.getDirection();if(t.getFlippingPage())if(this.flippingPage=i===g.RIGHT?this.rightPage.getTopPage():this.leftPage.getTopPage(),this.bottomPage=i===g.RIGHT?this.rightPage.getBottomPage():this.leftPage.getBottomPage(),!this.flippingPage||!this.bottomPage)return;this.flippingPage.load(),this.bottomPage.load(),this.flippingPage.setOrientation(i),this.bottomPage.setOrientation(i),this.flippingPage.setZIndex(this.setting.startZIndex+2),this.bottomPage.setZIndex(this.setting.startZIndex+1),this.leftPage.hide(),this.rightPage.hide()}})(this,this.setting),L[this.block]=new(class{constructor(t,i,e){this.duration=1,this.startPoint=null,this.endPoint=null,this.started=!1,this.app=t,this.helper=i,this.pageController=e,this.onAnimate=null}start(t,i,e){this.duration=e,this.startPoint=t,this.endPoint=i,this.started=!0,this.onAnimate=requestAnimationFrame(t=>this.animate(t))}stop(){this.started=!1,cancelAnimationFrame(this.onAnimate)}animate(t){this.started&& (this.onAnimate=requestAnimationFrame(t=>this.animate(t)),this.processing(t))}processing(t){if(!this.started)return;const i={x:this.endPoint.x-this.startPoint.x,y:this.endPoint.y-this.startPoint.y},e=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),s=this.duration-Math.max(0,this.duration-.1*e),o=Math.min(1,s/this.duration);if(o>=1)return this.started=!1,void this.pageController.fix(this.endPoint);const n={x:this.startPoint.x+o*i.x,y:this.startPoint.y+o*i.y};this.pageController.fold(n)}})(this,this.helper,this.pageController),this.pageFlip=new(class{constructor(t,i){this.app=t,this.pageRepository=i,this.currentPage=0,this.isFlipping=!1,this.orientation=this.app.getSetting().usePortrait?"portrait":"landscape",this.app.getUI().getPages().forEach(t=>t.classList.add("stf__item--"+this.orientation))}turnToPage(t){const i=this.app.getPageFlip().getCurrentPageIndex();if(!this.isFlipping)if(t!==i){const e=this.app.getRender(),s=t>i;if(s)this.turnToNextPage();else{if(!this.app.getSetting().showCover&&0===t)return;this.turnToPrevPage()}const o=Math.abs(t-i);o>1&&setTimeout(()=>{this.turnToPage(t)},e.getFlippingTime())}}turnToNextPage(){const t=this.app.getPageFlip().getCurrentPageIndex();if(this.isFlipping)return;if(t>=this.pageRepository.getPages().length-1)return;const i=this.app.getRender();this.flip(t,g.RIGHT),i.startAnimation(),this.app.startAutoFlip(g.RIGHT),i.show(),this.isFlipping=!0}turnToPrevPage(){const t=this.app.getPageFlip().getCurrentPageIndex();if(this.isFlipping)return;if(t<=0)return;const i=this.app.getRender();this.flip(t,g.LEFT),i.startAnimation(),this.app.startAutoFlip(g.LEFT),this.isFlipping=!0}flip(t,i){this.app.getUI().getPages().length;const e=this.app.getRender();e.clear(),this.pageRepository.update(),this.app.getRender().update(),this.isFlipping=!1,i===g.RIGHT?this.currentPage+=2:this.currentPage-=2,this.currentPage<0&&(this.currentPage=0),this.currentPage>=this.pageRepository.getPages().length&&(this.currentPage=this.pageRepository.getPages().length-1);const s={x:i===g.RIGHT?1:.9*e.getRect().width,y:1};this.pageController.start(s),this.pageRepository.flip(this.pageController)}flipNext(t="top"){this.flip("right"===t?g.RIGHT:g.LEFT)}flipPrev(t="top"){this.flip("right"===t?g.LEFT:g.RIGHT)}getCurrentPageIndex(){const t=this.pageRepository.getPages();return this.orientation,this.currentPage>=t.length?t.length-1:this.currentPage}getPageCount(){return this.pageRepository.getPages().length}getOrientation(){return this.orientation}destroy(){}})(this,w[this.block]),this.pageController=new u(this,this.helper),this.ui=p[this.block],this.mouse=new l(this.block,{}),this.eventHandlers(),this.pageRepository=w[this.block],this.render=this.setting.usePortrait?c[this.block]:h[this.block],this.pages=null}getUI(){return this.ui}getRender(){return this.render}getHelper(){return this.helper}getPageFlip(){return this.pageFlip}getSetting(){return this.setting}getEvents(){return this.events}getMousePos(){return this.mouse.getNowPoint()}startAutoFlip(t){const i=this.render.getRect();this.flippingAction(t===g.RIGHT?{x:i.width-1,y:1}:{x:1,y:1},t)}flippingAction(t,i){const e={x:i===g.RIGHT?1:this.render.getRect().width-1,y:t.y};L[this.block].start(t,e,this.setting.flippingTime/1e3)}eventHandlers(){this.mouse.on("start",t=>this.onMouseDown(t)),this.mouse.on("move",t=>this.onMouseMove(t)),this.mouse.on("end",t=>this.onMouseUp(t)),this.mouse.on("leave",t=>this.onMouseUp(t))}onMouseDown(t){if(this.pageFlip.isFlipping||this.setting.disableFlipByClick)return;const i=this.pageController.start(this.mouse.getStartPoint());i&&(this.flippingAction(this.mouse.getStartPoint(),i),this.render.startAnimation())}onMouseMove(t){"user_fold"===this.pageController.getState()&&this.pageController.fold(this.mouse.getNowPoint())}onMouseUp(t){"user_fold"===this.pageController.getState()&&("read"===this.pageController.getState()?this.render.stopAnimation():(Math.abs(this.pageController.getAngle())<90&&this.mouse.getDist()<this.setting.swipeDistance?this.flippingAction(this.mouse.getNowPoint(),this.pageController.getDirection()===g.RIGHT?g.RIGHT:g.LEFT):this.flippingAction(this.mouse.getNowPoint(),this.pageController.getDirection()===g.RIGHT?g.LEFT:g.RIGHT),this.render.startAnimation()))}loadFromImages(t){this.ui.loadFromImages(t),this.pages=this.ui.getPages(),this.pageRepository.load(),this.render.update(),this.pageFlip.turnToPage(this.setting.page)}loadFromHTML(t){this.ui.loadFromHTML(t),this.pages=this.ui.getPages(),this.pageRepository.load(),this.render.update(),this.pageFlip.turnToPage(this.setting.page)}updateFromImages(t){this.ui.updateFromImages(t),this.pageRepository.load(),this.render.update()}updateFromHTML(t){this.ui.updateFromHTML(t),this.pageRepository.load(),this.render.update()}destroy(){this.ui.destroy(),this.render.destroy(),this.mouse.destroy()}}t.PageFlip=_,t.helper=void 0,Object.defineProperty(t,"__esModule",{value:!0})}));

        // --- NUESTRO SCRIPT DE CONFIGURACIÓN DEL ÁLBUM ---
        document.addEventListener('DOMContentLoaded', function () {

            // ------------------------------------------------------------------
            // --- ¡CONFIGURA TUS IMÁGENES AQUÍ! ---
            // ------------------------------------------------------------------

            // 1. Imagen de la portada (el álbum cerrado, relación 35x25)
            const imagenPortada = 'images/portada.jpg';

            // 2. Lista de todas las imágenes de los pliegos (las de 70x25)
            //    Añade o quita líneas según el número de pliegos que tengas.
            const imagenesPliegos = [
                'images/pliego-01.jpg'
                // 'images/pliego-11.jpg', // etc.
            ];

            // --- FIN DE LA CONFIGURACIÓN ---


            // --- CÓDIGO QUE GENERA EL ÁLBUM (No es necesario tocarlo) ---

            const album = document.getElementById('album');
            if (!album) return;

            // 1. Crear la portada
            const portadaDiv = document.createElement('div');
            portadaDiv.classList.add('page', 'page--cover');
            portadaDiv.setAttribute('data-density', 'hard'); // Simula una tapa dura
            portadaDiv.innerHTML = `<div class="page-content"><img src="${imagenPortada}" alt="Portada" class="cover-image"></div>`;
            album.appendChild(portadaDiv);

            // 2. Crear las páginas interiores a partir de los pliegos
            imagenesPliegos.forEach(urlPliego => {
                // Página izquierda del pliego
                const pageLeft = document.createElement('div');
                pageLeft.classList.add('page');
                pageLeft.innerHTML = `<div class="page-content pliego-izquierdo" style="background-image: url('${urlPliego}')"></div>`;
                album.appendChild(pageLeft);

                // Página derecha del pliego
                const pageRight = document.createElement('div');
                pageRight.classList.add('page');
                pageRight.innerHTML = `<div class="page-content pliego-derecho" style="background-image: url('${urlPliego}')"></div>`;
                album.appendChild(pageRight);
            });

            // 3. Crear la contraportada
            const contraportadaDiv = document.createElement('div');
            contraportadaDiv.classList.add('page', 'page--cover');
            contraportadaDiv.setAttribute('data-density', 'hard'); // Simula una tapa dura
            contraportadaDiv.innerHTML = `<div class="page-content"></div>`; // Puedes poner una imagen o dejarla vacía
            album.appendChild(contraportadaDiv);

            // --- INICIALIZACIÓN DEL FLIPBOOK ---
            
            // Dimensiones basadas en tu proporción 35x25 (relación 7:5).
            // Puedes cambiar los valores, pero mantén la proporción para que no se deforme.
            const anchoPagina = 630;
            const altoPagina = 450;

            const pageFlip = new St.PageFlip(album, {
                width: anchoPagina,
                height: altoPagina,
                showCover: true,      // Muestra la portada al inicio.
                usePortrait: false,   // El libro es apaisado (landscape).
                flippingTime: 1000,   // Tiempo de la animación de giro en milisegundos.
                maxShadowOpacity: 0.2 // Sombra de la página al girar.
            });

            // Cargar el libro
            pageFlip.loadFromHTML(document.querySelectorAll('.page'));
        });
    </script>

</body>
</html>